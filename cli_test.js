#!/usr/bin/env node
/**
 * Test String Escape CLI - A test CLI that contains single quotes 'like this' and double quotes "like this" to trigger escaping issues
 * Generated by Goobits CLI Framework
 */

const { Command } = require('commander');
const hooks = require('./hooks');

const program = new Command();

program
    .name('Test CLI')
    .description('A test CLI that contains single quotes \'like this\' and double quotes \"like this\" to trigger escaping issues')
    .version('1.0.0');

program
    .command('deploy')
    .description('Deploy the application with \'production\' or \"staging\" environment')
    .argument('environment', 'Environment to deploy to: \'prod\', \"stage\", or \'dev\'')
    .option('--force, -f', 'Force deployment even if there are warnings (use \'--force\' flag)')
    .option('--timeout', 'Timeout in seconds (e.g., \'--timeout 300\')', 120)
    .action(async (environment, options) => {
        try {
            const hookName = 'on_deploy';
            if (typeof hooks[hookName] === 'function') {
                await hooks[hookName](environment, options);
            } else {
                console.error(`Hook function '${hookName}' not implemented`);
                process.exit(1);
            }
        } catch (error) {
            console.error('Error:', error.message);
            process.exit(1);
        }
    });

program
    .command('status')
    .description('Check application status including \'health\' checks and \"performance\" metrics')
    .option('--format', 'Output format: \'json\', \"yaml\", or \'table\'', "table")
    .action(async (options) => {
        try {
            const hookName = 'on_status';
            if (typeof hooks[hookName] === 'function') {
                await hooks[hookName](options);
            } else {
                console.error(`Hook function '${hookName}' not implemented`);
                process.exit(1);
            }
        } catch (error) {
            console.error('Error:', error.message);
            process.exit(1);
        }
    });

program.parse();