//! ╔══════════════════════════════════════════════════════════════════════════╗
//! ║                        AUTO-GENERATED FILE                               ║
//! ║  Generated by: goobits-cli v1.0.0             ║
//! ║  ⚠️  DO NOT EDIT - Changes will be overwritten                           ║
//! ╚══════════════════════════════════════════════════════════════════════════╝
//!
//! CLI module for demo-rust-cli
//! This module contains the CLI command structure and argument parsing logic.

use clap::{Arg, Command, ArgMatches, value_parser};
use anyhow::Result;
use crate::hooks::HookManager;
use crate::errors::{CliError, ExitCode};

/// Build the main CLI application
pub fn build_cli() -> Command {
    Command::new("demo_rust")
        .version(crate::VERSION)
        .about("Rust CLI demonstration")
        .author("Demo User")
        .subcommand(
            Command::new("greet")
                .about("No description provided")                .arg(
                    Arg::new("style")
                        .long("style")
.short('s')                        .help("No description provided")                        .value_parser(clap::value_parser!(String))                        .default_value("casual")                )                .arg(
                    Arg::new("count")
                        .long("count")
.short('c')                        .help("No description provided")                        .value_parser(value_parser!(i32))                        .default_value("1")                )                .arg(
                    Arg::new("uppercase")
                        .long("uppercase")
.short('u')                        .help("No description provided")                        .action(clap::ArgAction::SetTrue)                )                .arg(
                    Arg::new("language")
                        .long("language")
.short('l')                        .help("No description provided")                        .value_parser(clap::value_parser!(String))                        .default_value("en")                )        )        .subcommand(
            Command::new("info")
                .about("No description provided")                .arg(
                    Arg::new("format")
                        .long("format")
.short('f')                        .help("No description provided")                        .value_parser(clap::value_parser!(String))                        .default_value("text")                )                .arg(
                    Arg::new("verbose")
                        .long("verbose")
.short('v')                        .help("No description provided")                        .action(clap::ArgAction::SetTrue)                )                .arg(
                    Arg::new("sections")
                        .long("sections")
.short('s')                        .help("No description provided")                        .value_parser(clap::value_parser!(String))                        .default_value("all")                )        )        .arg(
            Arg::new("verbose")
                .long("verbose")
                .short('v')
                .help("Enable verbose output")
                .action(clap::ArgAction::SetTrue)
        )
}

/// Execute a CLI command using the hook system
pub fn execute_command(matches: &ArgMatches, hook_manager: &HookManager) -> Result<()> {
    match matches.subcommand() {
        Some(("greet", sub_matches)) => {
            let hook_name = "on_greet";
            hook_manager.execute_hook(hook_name, sub_matches)
                .map_err(|e| CliError::new(format!("Failed to execute {}: {}", hook_name, e), ExitCode::GeneralError))?;
        }        Some(("info", sub_matches)) => {
            let hook_name = "on_info";
            hook_manager.execute_hook(hook_name, sub_matches)
                .map_err(|e| CliError::new(format!("Failed to execute {}: {}", hook_name, e), ExitCode::GeneralError))?;
        }        _ => {
            println!("No command specified. Use --help for available commands.");
        }
    }
    
    Ok(())
}