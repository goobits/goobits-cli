/**
 * A sample TypeScript CLI built with Goobits
 * Generated by Goobits CLI Framework using Universal Templates
 * 
 * Entry point: demo_ts
 */

import { Command } from 'commander';
import * as hooks from './src/hooks.js';

const program = new Command();

program
  .name('demo_ts')
  .description('TypeScript CLI demonstration')
  .version('1.0.0');// Global option: interactive
program.option('-i, --interactive <value>', '');// greet command
program
  .command('greet')
  .description('Greet someone with style')  .argument('<name>', 'Name to greet')  .argument('[message]', 'Custom greeting message')  .option('-s, --style <value>', 'Greeting style')  .option('-c, --count <value>', 'Repeat greeting N times')  .option('-u, --uppercase', 'Convert to uppercase')  .option('-l, --language <value>', 'Language code')  .action(async (name, message, options) => {
    const args = {
      commandName: 'greet',
      rawArgs: options,      name,      message,    };
    
    try {
      const hookFunction = hooks.onGreet;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing greet:`, error.message);
      process.exit(1);
    }
  });// info command
program
  .command('info')
  .description('Display system and environment information')  .option('-f, --format <value>', 'Output format')  .option('-v, --verbose', 'Show detailed information')  .option('-s, --sections <value>', 'Comma-separated sections to show')  .action(async (options) => {
    const args = {
      commandName: 'info',
      rawArgs: options,    };
    
    try {
      const hookFunction = hooks.onInfo;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing info:`, error.message);
      process.exit(1);
    }
  });
// Main CLI function
export function cli() {
  program.parse(process.argv);
  
  // Show help if no command provided
  if (!process.argv.slice(2).length) {
    program.outputHelp();
  }
}

// Export for use as a module
export default cli;

// Auto-run if this is the main module
if (import.meta.url === `file://${process.argv[1]}`) {
  cli();
}