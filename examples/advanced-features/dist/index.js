"use strict";
/**
 * ╔════════════════════════════════════════════════════════════════════════════╗
 * ║                        AUTO-GENERATED FILE                               ║
 * ║  Generated by: goobits-cli v1.0.0                     ║
 * ║  ⚠️  DO NOT EDIT - Changes will be overwritten                           ║
 * ╚════════════════════════════════════════════════════════════════════════════╝
 *
 * Main CLI implementation for Nested Command Demo
 * Generated from: nested-command-demo.yaml
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.cli = cli;
const commander_1 = require("commander");
const chalk_1 = require("chalk");
const hooks = require("./src/hooks.js");
// Create the main program
const program = new commander_1.Command();
// Main CLI setup
function cli() {
    program
        .name('demo')
        .description('Demonstration of deep nested command capabilities')
        .version('1.0.0');
    // Define commands from configuration
    program
        .command('simple')
        .description('Simple command that works today')
        .argument('<message>', 'Message to display')
        .option('--verbose', 'Verbose output')
        .action(async (message, options) => {
        const args = {
            commandName: 'simple',
            rawArgs: options,
            message,
        };
        try {
            const hookName = 'onSimple';
            if (hooks && typeof hooks[hookName] === 'function') {
                await hooks[hookName](args);
            }
            else {
                console.log(chalk_1.default.blue(`Executing simple command...`));
                console.log(`  message:`, message);
                console.log('Options:', options);
            }
        }
        catch (error) {
            console.error(chalk_1.default.red(`Error executing simple:`), error);
            process.exit(1);
        }
    });
    program
        .command('database')
        .description('Database operations')
        .action(async (options) => {
        const args = {
            commandName: 'database',
            rawArgs: options,
        };
        try {
            const hookName = 'onDatabase';
            if (hooks && typeof hooks[hookName] === 'function') {
                await hooks[hookName](args);
            }
            else {
                console.log(chalk_1.default.blue(`Executing database command...`));
                console.log('Options:', options);
            }
        }
        catch (error) {
            console.error(chalk_1.default.red(`Error executing database:`), error);
            process.exit(1);
        }
    });
    program
        .command('api')
        .description('API management')
        .action(async (options) => {
        const args = {
            commandName: 'api',
            rawArgs: options,
        };
        try {
            const hookName = 'onApi';
            if (hooks && typeof hooks[hookName] === 'function') {
                await hooks[hookName](args);
            }
            else {
                console.log(chalk_1.default.blue(`Executing api command...`));
                console.log('Options:', options);
            }
        }
        catch (error) {
            console.error(chalk_1.default.red(`Error executing api:`), error);
            process.exit(1);
        }
    });
    // Parse arguments
    program.parse(process.argv);
    // Show help if no arguments provided
    if (!process.argv.slice(2).length) {
        program.outputHelp();
    }
}
// Export for use as a module
exports.default = cli;
