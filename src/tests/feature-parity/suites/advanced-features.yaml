suite_name: advanced-features
description: Focused advanced parity checks (subcommands, options, hooks)

setup:
  goobits_config: ../test-cli-config.yaml
  cleanup: true

tests:
  - name: nested_subcommand_help
    description: Help for nested subcommands
    command: config get --help
    stdout:
      contains:
        - "get"

  - name: subcommand_execution
    description: Execute subcommand successfully
    command: config list
    exit_code: 0
    stdout:
      contains:
        - "theme"
        - "timeout"

  - name: short_and_long_options
    description: Both short and long options work
    command: hello -g Hi World
    stdout:
      contains:
        - "Hi"
        - "World"

  - name: option_with_equals_syntax
    description: Options with equals syntax
    command: hello World --greeting=Howdy
    stdout:
      contains:
        - "Howdy"
        - "World"

  - name: environment_variable_override
    description: Environment variables can override config
    command: config get theme
    env:
      TEST_CLI_THEME: "dark"
    stdout:
      contains:
        - "dark"
    language_overrides:
      nodejs:
        skip: true
        skip_reason: "Node env override wiring differs in current generated config loader"

  - name: hook_execution_verification
    description: Verify hooks are called
    command: hello TestUser
    stdout:
      contains:
        - "TestUser"

  - name: stdin_input_handling
    description: Reserved for future stdin behavior parity
    command: echo
    skip_languages: ["all"]
    skip_reason: "stdin parity command contract is pending" 
