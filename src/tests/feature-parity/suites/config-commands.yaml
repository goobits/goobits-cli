suite_name: config-commands
description: Stable configuration command parity checks

setup:
  goobits_config: ../test-cli-config.yaml
  cleanup: true

tests:
  - name: config_help
    description: Config command help
    command: config --help
    stdout:
      contains:
        - "config"
        - "get"
        - "set"

  - name: config_list_default
    description: List default configuration
    command: config list
    stdout:
      contains:
        - "theme"
        - "timeout"

  - name: config_set_new_value
    description: Set a config value
    command: config set theme dark
    stdout:
      contains:
        - "Setting"

  - name: config_reset_without_force
    description: Reset config without force requires confirmation flow
    command: config reset
    stdin: "n\n"
    exit_code: 0
    stdout:
      contains:
        - "reset"
    language_overrides:
      nodejs:
        skip: true
        skip_reason: "Interactive prompt flow differs in Node.js"
      rust:
        skip: true
        skip_reason: "Interactive prompt flow differs in Rust"
