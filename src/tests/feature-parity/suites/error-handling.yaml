suite_name: error-handling
description: Core error-path parity checks

setup:
  goobits_config: ../test-cli-config.yaml
  cleanup: true

tests:
  - name: fail_default_exit_code
    description: Fail command returns default exit code
    command: fail
    exit_code: 1
    stderr:
      contains:
        - "failed"

  - name: fail_custom_exit_code
    description: Fail command with custom exit code
    command: fail --code 42
    exit_code: 42
    stderr:
      contains:
        - "42"

  - name: unknown_option
    description: Unknown option returns usage error
    command: hello World --unknown
    exit_code: 2
    stderr:
      contains:
        - "unknown"
    language_overrides:
      nodejs:
        exit_code: 1

  - name: multiple_values_for_single_arg
    description: Extra arg error behavior
    command: hello World Universe
    exit_code: 2
    language_overrides:
      nodejs:
        skip: true
        skip_reason: "Node parser currently accepts this form"
