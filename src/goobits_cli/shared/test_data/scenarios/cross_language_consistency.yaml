# Cross-language consistency test scenario
# Tests that CLI behavior is consistent across all supported languages

name: "Cross-Language Consistency"
description: "Validate that CLI behavior is consistent across Python, Node.js, TypeScript, and Rust implementations"

languages:
  - python
  - nodejs
  - typescript
  - rust

configurations:
  - complexity: minimal
    description: "Single command CLI"
  - complexity: basic
    description: "Multi-command CLI with options"
  - complexity: complex
    description: "Full-featured CLI with subcommands"

test_cases:
  - name: "help_output"
    description: "Test --help output consistency"
    command: ["--help"]
    expected_characteristics:
      - contains_usage_line: true
      - contains_options_section: true
      - contains_commands_section: true
      - exit_code: 0
    normalization: true
    
  - name: "version_output"
    description: "Test --version output consistency"
    command: ["--version"]
    expected_characteristics:
      - contains_version_number: true
      - exit_code: 0
    normalization: true
    
  - name: "invalid_command"
    description: "Test error handling for invalid commands"
    command: ["nonexistent"]
    expected_characteristics:
      - exit_code: 1
      - contains_error_message: true
      - suggests_help: true
    normalization: true
    
  - name: "missing_required_argument"
    description: "Test error when required argument is missing"
    command: ["greet"]  # Missing required 'name' argument
    expected_characteristics:
      - exit_code: 1
      - contains_error_message: true
      - mentions_missing_argument: true
    normalization: true
    
  - name: "command_help"
    description: "Test command-specific help"
    command: ["greet", "--help"]
    expected_characteristics:
      - exit_code: 0
      - contains_command_description: true
      - contains_argument_info: true
    normalization: true
    
  - name: "successful_command_execution"
    description: "Test successful command execution"
    command: ["greet", "World"]
    expected_characteristics:
      - exit_code: 0
      - produces_output: true
    normalization: false  # Don't normalize actual command output

comparison_criteria:
  - name: "help_structure"
    description: "Help output should have similar structure"
    sections:
      - "Usage"
      - "Options"
      - "Commands"
    
  - name: "error_handling"
    description: "Error messages should be informative"
    requirements:
      - non_zero_exit_code: true
      - descriptive_message: true
      - suggests_solution: true
      
  - name: "version_format"
    description: "Version should follow semantic versioning"
    pattern: r'\d+\.\d+\.\d+'

performance_benchmarks:
  - metric: "generation_time"
    description: "Time to generate CLI code"
    threshold_ms: 5000
    
  - metric: "cli_startup_time"
    description: "Time for CLI to show help"
    command: ["--help"]
    threshold_ms: 1000
    
  - metric: "generated_file_size"
    description: "Size of generated files"
    threshold_kb: 100

success_criteria:
  - all_languages_pass_basic_tests: true
  - cross_language_output_similarity: 0.8  # 80% similar after normalization
  - no_critical_differences: true
  - performance_within_thresholds: true

failure_handling:
  - generate_detailed_diff_report: true
  - capture_all_outputs: true
  - identify_root_cause: true
  - suggest_fixes: true