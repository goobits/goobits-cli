{# Help Text Formatting Template #}
{# Common help text patterns used across all language generators #}

{# Command description with optional icon #}
{% macro command_description(cmd_data) -%}
{% if cmd_data.icon %}{{ cmd_data.icon }} {% endif %}{{ cmd_data.desc }}
{%- endmacro %}

{# Format command usage line #}
{% macro command_usage(command_name, cmd_name, cmd_data) -%}
{{ command_name }} {{ cmd_name }}{% if cmd_data.args %}{% for arg in cmd_data.args %}{% if arg.required %} <{{ arg.name }}>{% else %} [{{ arg.name }}]{% endif %}{% endfor %}{% endif %}{% if cmd_data.options %} [OPTIONS]{% endif %}
{%- endmacro %}

{# Format argument list for help #}
{% macro format_arguments(args) -%}
{% if args %}
Arguments:
{% for arg in args %}
  {{ arg.name }}{% if not arg.required %} (optional){% endif %}
    {{ arg.desc }}{% if arg.choices %}
    Choices: {{ arg.choices | join(', ') }}{% endif %}{% if arg.default %}
    Default: {{ arg.default }}{% endif %}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Format option list for help #}
{% macro format_options(options) -%}
{% if options %}
Options:
{% for opt in options %}
  {% if opt.short %}-{{ opt.short }}, {% endif %}--{{ opt.name }}{% if opt.type != "flag" %} <{{ opt.type }}>{% endif %}
    {{ opt.desc }}{% if opt.default and opt.type != "flag" %}
    Default: {{ opt.default }}{% endif %}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Format examples section #}
{% macro format_examples(command_name, examples) -%}
{% if examples %}
Examples:
{% for example in examples %}
  {{ command_name }} {{ example.command }}
    {{ example.description }}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Format subcommand list #}
{% macro format_subcommands(subcommands) -%}
{% if subcommands %}
Subcommands:
{% for subcmd_name, subcmd_data in subcommands.items() %}
  {{ subcmd_name }}
    {{ subcmd_data.desc }}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Common error message templates #}
{% macro error_invalid_argument(arg_name, provided_value, valid_choices=None) -%}
Error: Invalid value '{{ provided_value }}' for argument '{{ arg_name }}'{% if valid_choices %}.
Valid choices are: {{ valid_choices | join(', ') }}{% endif %}
{%- endmacro %}

{% macro error_missing_argument(arg_name) -%}
Error: Missing required argument '{{ arg_name }}'
{%- endmacro %}

{% macro error_invalid_option(opt_name, provided_value) -%}
Error: Invalid value '{{ provided_value }}' for option '{{ opt_name }}'
{%- endmacro %}

{# Success message templates #}
{% macro success_command_completed(cmd_name) -%}
✅ Command '{{ cmd_name }}' completed successfully
{%- endmacro %}

{# Warning message templates #}
{% macro warning_deprecated_option(old_option, new_option) -%}
⚠️  Warning: Option '{{ old_option }}' is deprecated. Use '{{ new_option }}' instead
{%- endmacro %}

{# Language-specific help formatting #}
{% macro language_specific_help(language, content) -%}
{% if language == 'python' %}
{# Python/Click specific formatting #}
{{ content | format_multiline | escape_docstring }}
{% elif language in ['nodejs', 'typescript'] %}
{# Node.js/Commander.js specific formatting #}
{{ content | replace('\n', '\\n') }}
{% elif language == 'rust' %}
{# Rust/Clap specific formatting #}
{{ content | replace('"', '\\"') }}
{% else %}
{{ content }}
{% endif %}
{%- endmacro %}

{# Aligned examples (used in multiple language generators) #}
{% macro aligned_examples(examples, indent=2) -%}
{% if examples %}
{% for example in examples %}
{{ " " * indent }}{{ example.command }}
{{ " " * (indent + 2) }}{{ example.description }}
{% endfor %}
{% endif %}
{%- endmacro %}

{# Multi-line help text formatting #}
{% macro multiline_help_text(text, max_width=80) -%}
{% set lines = text.split('\n') %}
{% for line in lines %}
{% if line | length > max_width %}
{# Simple word wrap - can be enhanced further #}
{% set words = line.split(' ') %}
{% set current_line = '' %}
{% for word in words %}
{% if (current_line + ' ' + word) | length <= max_width %}
{% set current_line = current_line + (' ' if current_line else '') + word %}
{% else %}
{{ current_line }}
{% set current_line = word %}
{% endif %}
{% endfor %}
{{ current_line }}
{% else %}
{{ line }}
{% endif %}
{% endfor %}
{%- endmacro %}

{# Progress indicators for help text #}
{% macro progress_help() -%}
Use --progress to show progress bars for long-running operations
Use --quiet to suppress all output except errors
Use --verbose to show detailed information
{%- endmacro %}

{# Configuration help text #}
{% macro config_help(package_name, language) -%}
Configuration is stored in:
{% if language == 'python' %}
  ~/.config/{{ package_name }}/config.yaml
{% elif language in ['nodejs', 'typescript'] %}
  Linux: ~/.config/{{ package_name }}/
  macOS: ~/Library/Application Support/{{ package_name }}/
  Windows: %APPDATA%\{{ package_name }}\
{% elif language == 'rust' %}
  ~/.config/{{ package_name }}/config.yaml
{% endif %}

Edit the configuration file directly or use '{{ package_name }} config' commands
{%- endmacro %}