{#
Universal Component: package.json template for Node.js/TypeScript packages

This template generates the package.json file for Node.js CLI packages,
including proper dependencies, scripts, and metadata.

Template Variables Expected:
  - project: Project configuration  
  - cli: CLI configuration
  - nodejs: Node.js specific context
#}
{
  "name": "{{ project.package_name }}",
  "version": "{{ project.version }}",
  "description": "{{ project.description }}",
  "main": "{{ (nodejs.main_entry if nodejs is defined else typescript.main_entry if typescript is defined else 'index.js') | default('index.js') }}",
  "type": "module",
  "bin": {
    "{{ project.command_name }}": "./{{ (nodejs.bin_entry if nodejs is defined else typescript.bin_entry if typescript is defined else 'bin/index.js') | default('bin/index.js') }}"
  },
  "scripts": {
    "start": "node {{ (nodejs.main_entry if nodejs is defined else typescript.main_entry if typescript is defined else 'index.js') | default('index.js') }}",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": ["cli"{{ ', "' + project.keywords | join('", "') + '"' if project.keywords }}],
  "author": "{{ project.author | default('') }}",
  "license": "{{ project.license | default('MIT') }}",
  "dependencies": {
    "commander": "^11.1.0",
    "chalk": "^5.3.0"
    {%- if (nodejs is defined and nodejs.package_config.dependencies) %}
    {%- for dep, version in nodejs.package_config.dependencies.items() %}
    ,"{{ dep }}": "{{ version }}"
    {%- endfor %}
    {%- elif (typescript is defined and typescript.package_config.dependencies) %}
    {%- for dep, version in typescript.package_config.dependencies.items() %}
    ,"{{ dep }}": "{{ version }}"
    {%- endfor %}
    {%- endif %}
  },
  {%- if typescript is defined and typescript.package_config.devDependencies %}
  "devDependencies": {
    {%- for dep, version in typescript.package_config.devDependencies.items() %}
    "{{ dep }}": "{{ version }}"{{ "," if not loop.last }}
    {%- endfor %}
  },
  {%- endif %}
  "engines": {
    "node": ">=14.0.0"
  }
  {%- if project.repository %},
  "repository": {
    "type": "git",
    "url": "{{ project.repository }}"
  }
  {%- endif %}
  {%- if project.homepage %},
  "homepage": "{{ project.homepage }}"
  {%- endif %}
  {%- if project.bugs_url %},
  "bugs": {
    "url": "{{ project.bugs_url }}"
  }
  {%- endif %}
}