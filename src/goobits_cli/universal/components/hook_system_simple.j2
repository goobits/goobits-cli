{# Universal Hook System Template - Simplified
   
   This template generates simple hook functions that users can implement
   to provide business logic for their CLI commands.
   
   Variables expected:
   - language: Target language
   - project: Project metadata  
   - cli: CLI schema with commands
#}

{%- if language == 'rust' -%}
//! Hook implementations for {{ project.name }}
//! 
//! This file contains the business logic for your CLI commands.
//! Implement the hook functions below to handle your CLI commands.
//! 
//! Each command in your CLI corresponds to a hook function.

use clap::ArgMatches;
use anyhow::Result;

{%- for command_config in cli.root_command.subcommands if cli.root_command and cli.root_command.subcommands %}

/// Hook function for '{{ command_config.name }}' command
/// {{ command_config.description if command_config.description is defined else 'No description' }}
pub fn on_{{ command_config.name | replace('-', '_') }}(matches: &ArgMatches) -> Result<()> {
    // Add your business logic here
    println!("Executing {{ command_config.name }} command...");
    
    {%- if command_config.arguments is defined and command_config.arguments %}
    // Extract arguments
    {%- for arg in command_config.arguments %}
    {%- if arg.multiple is defined and arg.multiple %}
    if let Some({{ arg.name | replace('-', '_') }}_values) = matches.get_many::<String>("{{ arg.name }}") {
        let {{ arg.name | replace('-', '_') }}: Vec<&str> = {{ arg.name | replace('-', '_') }}_values.collect();
        println!("{{ arg.name }}: {:?}", {{ arg.name | replace('-', '_') }});
    }
    {%- else %}
    if let Some({{ arg.name | replace('-', '_') }}) = matches.get_one::<String>("{{ arg.name }}") {
        println!("{{ arg.name }}: {}", {{ arg.name | replace('-', '_') }});
    }
    {%- endif %}
    {%- endfor %}
    {%- endif %}
    
    {%- if command_config.options is defined and command_config.options %}
    // Extract options
    {%- for option in command_config.options %}
    {%- if option.type is defined and (option.type == 'boolean' or option.type == 'flag') %}
    let {{ option.name | replace('-', '_') }} = matches.get_flag("{{ option.name }}");
    println!("{{ option.name }}: {}", {{ option.name | replace('-', '_') }});
    {%- elif option.multiple is defined and option.multiple %}
    if let Some({{ option.name | replace('-', '_') }}_values) = matches.get_many::<String>("{{ option.name }}") {
        let {{ option.name | replace('-', '_') }}: Vec<&str> = {{ option.name | replace('-', '_') }}_values.collect();
        println!("{{ option.name }}: {:?}", {{ option.name | replace('-', '_') }});
    }
    {%- else %}
    if let Some({{ option.name | replace('-', '_') }}) = matches.get_one::<String>("{{ option.name }}") {
        println!("{{ option.name }}: {}", {{ option.name | replace('-', '_') }});
    }
    {%- endif %}
    {%- endfor %}
    {%- endif %}
    
    // Return Ok(()) for success, Err(...) for error
    Ok(())
}

{%- endfor %}

// Add any utility functions or structures here

{%- endif -%}