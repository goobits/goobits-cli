{#
Universal Component: Plugin types definition for TypeScript
This template generates TypeScript type definitions for plugin system.
#}
/**
 * Plugin types for {{ project.name }} CLI
 * Generated by Goobits CLI Framework
 */

export interface PluginManifest {
  name: string;
  version: string;
  description?: string;
  author?: string;
  license?: string;
  keywords?: string[];
  repository?: string;
  homepage?: string;
  dependencies?: Record<string, string>;
  peerDependencies?: Record<string, string>;
  engines?: {
    node?: string;
    npm?: string;
  };
}

export interface PluginContext {
  cli: {
    name: string;
    version: string;
    config: Record<string, any>;
  };
  project: {
    path: string;
    name?: string;
    version?: string;
  };
  environment: Record<string, string>;
  logger: {
    debug(message: string, ...args: any[]): void;
    info(message: string, ...args: any[]): void;
    warn(message: string, ...args: any[]): void;
    error(message: string, ...args: any[]): void;
  };
}

export interface PluginHooks {
  beforeCommand?(context: PluginContext, command: string, args: any[]): Promise<void> | void;
  afterCommand?(context: PluginContext, command: string, result: any): Promise<void> | void;
  onError?(context: PluginContext, error: Error): Promise<void> | void;
  onInit?(context: PluginContext): Promise<void> | void;
  onDestroy?(context: PluginContext): Promise<void> | void;
}

export interface Plugin extends PluginHooks {
  name: string;
  version: string;
  manifest?: PluginManifest;
  activate(context: PluginContext): Promise<void> | void;
  deactivate?(context: PluginContext): Promise<void> | void;
}

export interface PluginConfig {
  enabled: boolean;
  path?: string;
  options?: Record<string, any>;
  autoload?: boolean;
  priority?: number;
}

export interface PluginRegistry {
  register(plugin: Plugin): void;
  unregister(name: string): void;
  get(name: string): Plugin | undefined;
  getAll(): Plugin[];
  isEnabled(name: string): boolean;
  enable(name: string): void;
  disable(name: string): void;
}

export interface PluginManager {
  registry: PluginRegistry;
  load(pluginPath: string): Promise<Plugin>;
  loadAll(pluginsDir: string): Promise<Plugin[]>;
  activate(plugin: Plugin | string): Promise<void>;
  deactivate(plugin: Plugin | string): Promise<void>;
  executeHook(hookName: keyof PluginHooks, ...args: any[]): Promise<void>;
  getConfig(pluginName: string): PluginConfig | undefined;
  setConfig(pluginName: string, config: PluginConfig): void;
}