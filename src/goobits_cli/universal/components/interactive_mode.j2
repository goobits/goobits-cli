{#
Universal Interactive Mode Template (Simplified)
===============================================

This is the SIMPLIFIED version of interactive_mode.j2 that uses the extracted
InteractiveFramework instead of embedding business logic in the template.

Previously: 2,411 lines of complex template logic
Now: ~100 lines of simple framework integration

The business logic has been extracted to:
- src/goobits_cli/interactive/interactive_framework.py (core orchestration)
- src/goobits_cli/interactive/language_adapters.py (language-specific generation)
#}

{#- Import the interactive framework -#}
{%- set interactive_framework = get_interactive_framework() -%}

{#- Prepare configuration for the framework -#}
{%- set framework_config = {
    'project': {
        'name': project.name|default('CLI'),
        'command_name': project.command_name|default(project.name|default('cli')),
        'display_name': project.display_name|default(project.name|default('CLI')),
        'description': project.description|default('')
    },
    'features': features|default({}),
    'cli': cli|default({})
} -%}

{#- Generate language-specific interactive mode code using the framework -#}
{{ interactive_framework.generate_interactive_code(language, framework_config) }}

{#
That's it! All the complex business logic is now in testable Python code.

Benefits of this approach:
1. Business logic is now unit testable
2. No more duplicated conditionals across languages  
3. Easy to debug and maintain
4. Clear separation of concerns
5. Template is now just a thin integration layer

The extracted framework provides:
- Language-specific REPL generation
- Feature management (sessions, variables, pipelines)
- Hook system integration
- Smart completion support
- Testable business logic
- Maintainable architecture

Template reduction: 2,411 â†’ ~100 lines (96% reduction)
Extracted logic: ~2,300 lines moved to testable Python frameworks
#}