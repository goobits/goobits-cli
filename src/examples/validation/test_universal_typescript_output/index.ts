/**
 * A test CLI for validating Universal Template System functionality
 * Generated by Goobits CLI Framework using Universal Templates
 * 
 * Entry point: test-cli
 */

import { Command } from 'commander';
import * as hooks from './src/hooks.js';

const program = new Command();

program
  .name('test-cli')
  .description('Test CLI for universal template validation')
  .version('1.0.0');// hello command
program
  .command('hello')
  .description('Say hello to someone')  .argument('<name>', 'Name to greet')  .option('-g, --greeting <value>', 'Custom greeting message')  .action(async (name, options) => {
    const args = {
      commandName: 'hello',
      rawArgs: options,      name,    };
    
    try {
      const hookFunction = hooks.onHello;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing hello:`, error.message);
      process.exit(1);
    }
  });
// Main CLI function
export function cli() {
  program.parse(process.argv);
  
  // Show help if no command provided
  if (!process.argv.slice(2).length) {
    program.outputHelp();
  }
}

// Export for use as a module
export default cli;

// Auto-run if this is the main module
if (import.meta.url === `file://${process.argv[1]}`) {
  cli();
}