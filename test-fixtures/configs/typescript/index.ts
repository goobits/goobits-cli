/**
 * Testing TypeScript generation
 * Generated by Goobits CLI Framework using Universal Templates
 * 
 * Entry point: testts
 */

import { Command } from 'commander';
import * as hooks from './src/hooks.js';

const program = new Command();

program
  .name('testts')
  .description('Test TypeScript CLI')
  .version('1.0.0');// Global option: interactive
program.option('-i, --interactive <value>', '');// hello command
program
  .command('hello')
  .description('Say hello')  .action(async (options) => {
    const args = {
      commandName: 'hello',
      rawArgs: options,    };
    
    try {
      const hookFunction = hooks.onHello;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing hello:`, error.message);
      process.exit(1);
    }
  });// build command group
const buildCommand = program
  .command('build')
  .description('Build something');// build project subcommand
buildCommand
  .command('project')
  .description('Build a project')  .action(async (options) => {
    const args = {
      commandName: 'build-project',
      rawArgs: options,    };
    
    try {
      const hookFunction = hooks.onProject;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing build project:`, error.message);
      process.exit(1);
    }
  });// serve command
program
  .command('serve')
  .description('Start server')  .action(async (options) => {
    const args = {
      commandName: 'serve',
      rawArgs: options,    };
    
    try {
      const hookFunction = hooks.onServe;
      if (hookFunction) {
        await hookFunction(args);
      } else {
        console.log(`No hook implementation found for command: ${args.commandName}`);
      }
    } catch (error) {
      console.error(`Error executing serve:`, error.message);
      process.exit(1);
    }
  });
// Main CLI function
export function cli() {
  program.parse(process.argv);
  
  // Show help if no command provided
  if (!process.argv.slice(2).length) {
    program.outputHelp();
  }
}

// Export for use as a module
export default cli;

// Auto-run if this is the main module
if (import.meta.url === `file://${process.argv[1]}`) {
  cli();
}